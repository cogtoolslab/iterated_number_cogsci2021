<!-- set size = 6  -->
<!-- to manually change to set size 4, change images to 4chairs.png (and adjust size to 400, 100), "six objects" to "four objects", and 48 trials to 40 -->
<!-- and second to last question in comprehension check  -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../lib/css/bootstrap.min.css" rel="stylesheet">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

<h2><center>Animal Game!</center>  </h2>

	<p>

	  In this experiment you will play a fun communication game with
    another player on MTurk! Each game consists of 32 trials. On each trial both of you will see four 
    groups of animals that vary in number and/or the kind of animal, like this: 
</p>
    <p>
      <center><img src="images/just_animals.png" alt="Example objects" style="width:400px;height:100px"></center>
    </p>
<p>

  One of you will act as the "Sketcher" and the other will be the "Viewer". Every trial will include the following steps:

</p>

  <p>
    <b>STEP ONE: </b> Both players are shown the same set of images, but in a different order. A “target” image will be highlighted to the Sketcher.
</p>
  <p>
    <b>STEP TWO: </b> The goal of the Sketcher will be to help the Viewer identify the target as quickly as possible, using the sketchpad. 
    The Sketcher can use the sketchpad however they like, but must<b> NOT </b>draw words, arrows, numbers, or other existing symbols (although inventing new symbols is ok).

  Also note that the sketcher and viewer will not be shown the exact same images. For instance, a group of five owls might appear
  to each player in a different configuration, such as:
</p>
  <p>
    <center><img src="images/owls_v1_v2.png" alt="Example constellations" style="width:420px;height:140px"></center>
  </p>

  <p>
    The Sketcher will have 30 seconds to create their message. Once they are done, they will click “submit”.
  </p>

  <p>
  <b>STEP THREE: </b> The message will be shown to the Viewer, who will then click on whichever image they think it matches and click “confirm” to submit their response. 
  <b>Once the "confirm" button is clicked, the response is submitted and the Viewer cannot change their selection.
  </b> 
</p>
<p>
  <b>STEP FOUR: </b> Both players will be given feedback; the Sketcher will see what the Viewer clicked (highlighted in black), and the Viewer will see the true target (highlighted in green). 
  Then you will both automatically advance to the next trial.
</p>

  <p>
    For each correct guess the Viewer makes, both of you will receive
    <b>an accuracy bonus of $0.03</b>. In addition, you will both receive <b>
    a speed bonus (up to $0.01) based on how fast the Viewer selects the correct image</b>.
    In other words, <b> the faster the Viewer can select the correct image,
    the larger the bonus both of you will receive</b>.
</p>
    However, <b>incorrect guesses do not receive any bonus</b> regardless of how quickly they were made.

  </p>

    <p>
    The bonus meter below displays the possible total bonus (accuracy bonus + time bonus) and shrinks as the 30-second timer runs down.

  </p>
    <p>
      <center><img src="images/bonusmeter2.png" alt="bonus meter" style="width:440px;height:200px"></center>
    </p>

<p> A few final notes: First, since you are playing with another
  player, you may see this screen before the game begins:
  <p>
    <center><img src="images/waitForViewer.png" alt="initial board" style="width:700px;height:200px"></center>
  </p>
  Just hold tight. Another player should join the game within the next
  few minutes. If you're in the waiting room for more than 5 minutes without
  another player joining, please return the HIT and try again later!
  Otherwise, once a Viewer joins, you will be notified and need to
  click a button to start the game.
</p>

<p>
  Second, to make sure your work is properly recognized, we ask that you be respectful of your partner and the rules of the game. If you are the Sketcher, <b>please do not "draw" words, arrows, numbers, or any other existing symbols</b>. If you are the Viewer, please do your best to be as responsive as possible so you can both earn the highest possible bonus.

</p>

<p>
  Third, please DO NOT refresh the page at any point once you start
  the game (including the waiting page). If you refresh, you will not
  be able to rejoin the game you were in and you may not be able to
  submit the HIT. <br> Thank you!
</p>

<h4>

    In sum:
    <br><br>
    As a Sketcher, your priority is to send useful information via the sketchpad that will help
    the Viewer always select the correct image. <b>Please do not "draw" numbers, words, arrows, or any other existing symbols</b>.
    <br><br>
    As a Viewer, your job is to be really sure when you are making your decision so
    you can always <b>select the correct image</b>.
    <br><br>
    Please fill out this short quiz below before getting started. Good luck and have fun!
</h4>



  </div>
  <div class="page-header">
    <h3>Comprehension Quiz</h3>
  </div>

 <div class="well" style="width:800px; margin: 0 auto">

  </br>
  The Sketcher can click on an image to end the trial.
    </br>
    <input type="radio" name="dgoal" value="yes"> False
    </br>
    <input type="radio" name="dgoal" value="no"> True
    </br>


  </br>
  The Viewer wants to click on the image that the Sketcher has drawn.
      </br>
      <input type="radio" name="mgoal" value="no"> False
      </br>
      <input type="radio" name="mgoal" value="yes"> True
      </br>


  </br>
  The target is the image which has the purple box around it (only seen by the Sketcher).
      </br>
      <input type="radio" name="round" value="yes"> True
      </br>
      <input type="radio" name="round" value="no"> False
      </br>

  </br>
  Only the Sketcher can use the sketchpad to send information.
      </br>
      <input type="radio" name="message" value="no"> False
      </br>
      <input type="radio" name="message" value="yes"> True
      </br>

  </br>
  There are a total of 200 trials.
      </br>
      <input type="radio" name="comp" value="no"> True
      </br>
      <input type="radio" name="comp" value="yes"> False
      </br>

  </br>
  The locations of the images are the same for the Sketcher and the Viewer.
      </br>
      <input type="radio" name="location" value="no"> True
      </br>
      <input type="radio" name="location" value="yes"> False
      </br>

    </br>
    If an incorrect guess is made under 30 seconds, both players will still receive a "speed bonus" for completing that trial quickly.
        </br>
        <input type="radio" name="incorrect" value="no"> True
        </br>
        <input type="radio" name="incorrect" value="yes"> False
        </br>

  </br>
    <input id="quiz_submit" type="submit" value="Submit">
      </br>
      </br>
  <div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="round"]:checked').val();
        var ans4 = $('input[name="message"]:checked').val();
        var ans5 = $('input[name="comp"]:checked').val();
        var ans6 = $('input[name="location"]:checked').val();
        var ans7 = $('input[name="incorrect"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes" && ans7 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 2) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <!-- <script src="../lib/js/bootstrap.min.js"></script> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  </body>
</html>
